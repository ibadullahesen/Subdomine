<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AxtarGet.xyz | Cinematic Fragments</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@900&display=swap');

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000000;
        }

        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }

        * {
            user-select: none;
            pointer-events: none;
        }
    </style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
/**
 * AxtarGet.xyz - Kinetik Partlama və Yığılma Animasiyası
 * Effekt: Fraqmentləşdirilmiş piksel fizikası
 */

const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d', { alpha: false });

let width, height;
let particles = [];
let nextParticles = [];
let phraseIndex = 0;
let isTransitioning = false;

const phrases = [
    "AxtarGet.xyz",
    "Rəqəmsal alətlər platforması.",
    "AI alətləri.",
    "QR kod generatoru.",
    "Şəkil redaktoru.",
    "PDF alətləri.",
    "Anonim çat.",
    "Tamamilə pulsuz.",
    "İndi istifadə et."
];

const config = {
    font: '900 80px Inter, sans-serif',
    particleSize: 2,
    resolution: 4, // Piksel sıxlığı (daha kiçik = daha çox detal)
    idleTime: 2500,
    transitionSpeed: 0.04
};

function resize() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
}

class Particle {
    constructor(x, y, targetX, targetY, isNext = false) {
        // Əgər "next" particle-dırsa, ekranın kənarından başlasın (yığılma effekti)
        if (isNext) {
            const angle = Math.random() * Math.PI * 2;
            const dist = Math.max(width, height);
            this.x = width / 2 + Math.cos(angle) * dist;
            this.y = height / 2 + Math.sin(angle) * dist;
        } else {
            this.x = x;
            this.y = y;
        }

        this.originX = x;
        this.originY = y;
        this.targetX = targetX;
        this.targetY = targetY;
        
        this.vx = (Math.random() - 0.5) * 20; // Partlama sürəti
        this.vy = (Math.random() - 0.5) * 20;
        
        this.acc = 0.15;
        this.friction = 0.85;
        this.opacity = isNext ? 0 : 1;
    }

    // Partlama (Dağılma) məntiqi
    explode() {
        this.x += this.vx;
        this.y += this.vy;
        this.vx *= 0.98;
        this.vy *= 0.98;
        this.opacity -= 0.015;
    }

    // Yığılma məntiqi
    assemble() {
        const dx = this.targetX - this.x;
        const dy = this.targetY - this.y;
        this.x += dx * 0.12;
        this.y += dy * 0.12;
        if (this.opacity < 1) this.opacity += 0.05;
    }

    draw() {
        if (this.opacity <= 0) return;
        ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
        ctx.fillRect(this.x, this.y, config.particleSize, config.particleSize);
    }
}

function getPoints(text) {
    const tempCanvas = document.createElement('canvas');
    const tCtx = tempCanvas.getContext('2d');
    tempCanvas.width = width;
    tempCanvas.height = height;

    // Font ölçüsünü ekrana uyğunlaşdır
    let dynamicFontSize = Math.min(width / 10, 80);
    if (width < 600) dynamicFontSize = 40;
    
    tCtx.font = `900 ${dynamicFontSize}px Inter, sans-serif`;
    tCtx.textAlign = 'center';
    tCtx.textBaseline = 'middle';
    tCtx.fillStyle = 'white';
    
    if (text.length > 20 && width < 600) {
        const words = text.split(' ');
        const mid = Math.ceil(words.length / 2);
        tCtx.fillText(words.slice(0, mid).join(' '), width / 2, height / 2 - dynamicFontSize/1.5);
        tCtx.fillText(words.slice(mid).join(' '), width / 2, height / 2 + dynamicFontSize/1.5);
    } else {
        tCtx.fillText(text, width / 2, height / 2);
    }

    const imgData = tCtx.getImageData(0, 0, width, height).data;
    const points = [];
    for (let y = 0; y < height; y += config.resolution) {
        for (let x = 0; x < width; x += config.resolution) {
            const i = (y * width + x) * 4;
            if (imgData[i] > 128) {
                points.push({ x, y });
            }
        }
    }
    return points;
}

function init() {
    resize();
    const points = getPoints(phrases[phraseIndex]);
    particles = points.map(p => new Particle(p.x, p.y, p.x, p.y));
    
    setTimeout(startTransition, config.idleTime);
}

function startTransition() {
    isTransitioning = true;
    const nextIndex = (phraseIndex + 1) % phrases.length;
    const nextPoints = getPoints(phrases[nextIndex]);
    
    nextParticles = nextPoints.map(p => new Particle(0, 0, p.x, p.y, true));
    
    // 1.5 saniyə sonra vəziyyəti dəyiş
    setTimeout(() => {
        particles = nextParticles;
        nextParticles = [];
        phraseIndex = nextIndex;
        isTransitioning = false;
        setTimeout(startTransition, config.idleTime);
    }, 1500);
}

function animate() {
    ctx.fillStyle = '#000000';
    ctx.fillRect(0, 0, width, height);

    if (isTransitioning) {
        // Mövcud mətni partlat
        particles.forEach(p => {
            p.explode();
            p.draw();
        });
        // Yeni mətni yığ
        nextParticles.forEach(p => {
            p.assemble();
            p.draw();
        });
    } else {
        // Sabit dayanmış mətn (yüngül titrəmə ilə)
        particles.forEach(p => {
            p.x += Math.sin(Date.now() * 0.002 + p.originX) * 0.2;
            p.y += Math.cos(Date.now() * 0.002 + p.originY) * 0.2;
            p.draw();
        });
    }

    requestAnimationFrame(animate);
}

window.addEventListener('resize', () => {
    resize();
    // Resetləmə
    const points = getPoints(phrases[phraseIndex]);
    particles = points.map(p => new Particle(p.x, p.y, p.x, p.y));
});

window.onload = () => {
    init();
    animate();
};

</script>
</body>
</html>
